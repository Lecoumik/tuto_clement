<!DOCTYPE html>
<html>
<head>
<style type="text/css">
    #map_canvas {
        width: 1024px;
        height: 700px;
    }
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBK94YavQZF05dUl2lc5pxVA2XD7XHjfqU&sensor=false"></script>

<script type="text/javascript">

function initialize() {
    var latlng = new google.maps.LatLng(0, 23);
    var myOptions = {
        zoom: 15,
          center: { lat: 43.85965, lng: 1.8808027 },
          mapTypeId: "satellite",
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var url = "http://localhost:8080/coord";

        $.getJSON(url, function (data) {
            // on prepare un tableau de coordonnées
            var mypath = new Array();
            // on parcour les tracés
            $.each(data, function(i, infos) {
                // on recupere les infos du tracé
                var weight = infos.weigth;
                var color = infos.color;
                // on parse les coordonnées du tracé
                $.each(infos.coord, function(index, coord) {
                    var lat = coord.lat;
                    var lng = coord.lng;
                    mypath.push(new google.maps.LatLng(lat, lng));
                });
                console.log(color);
                // on dessine le tracé
                var polyline = new google.maps.Polyline({
                    path: mypath,
                    strokeColor: color,
                    strokeOpacity: 1.0,
                    strokeWeight: weight
                });
                polyline.setMap(map);
            });
        });
    }

    // google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body onload="initialize()">
  <div id="map_canvas"></div>
</body>
</html>
